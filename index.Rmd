---
title: "Beyond proximity: utility-based access from location-based services data."
type: article
journal: ijerph
author:
  - name: Gregory S. Macfarlane
    affil: 1, *
  - name: Emma Stucki
    affil: 1
  - name: Alisha Redelfs
    affil: 2
  - name: Lori Spruance
    affil: 2
affiliation: 
  - num: 1
    address: Brigham Young University, Civil and Construction Engineering Department
  - num: 2
    address: Brigham Young University, Public Health Department
footnote:
  - code: 1
    text: "Corresponding Author"
correspondence: |
  gregmacfarlane@byu.edu; Tel.: +1.801.422.8505
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
status: submit
bibliography: [book.bib]
link-citations: yes
keywords: |
  Accessibility; Spatial analysis
simplesummary: |
  Proximity to community resources is often used as a benchmark in spatial 
  public health analyses, but a measure that incorporates observed preferences
  leads to different policy interventions.
abstract: |
    Understanding who in a community has access to its resources – parks, libraries,  grocery stores, etc. – has profound equity implications, but typical methods  to understand access to these resources are limited. Travel time buffers require  researchers to assert mode of access as well as an arbitrary distance threshold;  further, these methods do not distinguish between destination quality attributes  in an effective way. In this research, we present a methodology to develop  utility-based accessibility measures for parks, libraries, and grocery stores  in Utah County, Utah. The method relies on passive location-based services data  to model destination choice to these community resources; the destination choice model utility functions in turn allow us to develop a picture of regional access that is sensitive to: the quality and size of the destination resource;  continuous (non-binary) travel impedance by multiple modes; and the  sociodemographic attributes of the traveler. We then use this measure  to explore equity in access to the specified community resources across income level in Utah County: the results reveal a discrepancy between which neighborhoods might be targeted for intervention using space-based analysis.
acknowledgement: |
  Tables and figures in the article are produced using a variety of packages for R [@modelsummary; @ggspatial]. 
  The authors are grateful to Brooke Jones, Kaeli Monahan, and Mali Smith for their help in gathering the grocery 
  store and library information data. Connor Williams gathered the parks data, and Michael Copley assisted with the 
  StreetLight data. 
authorcontributions: |
  G. Macfarlane conceived and designed the experiments. G. Macfarlane and E. Stucki 
  performed the experiments. A. Redelfs and L. Spruance designed the data collection
  efforts. All authors reviewed and edited the paper from an intial draft by G. Macfarlane.
conflictsofinterest: |
  The authors declare no conflicts of interest.
header-includes: |
  \usepackage{hyperref}
  \usepackage[utf8]{inputenc}
  \def\tightlist{}
---

```{r setup, include = FALSE}
# load R libraries here; the `include` flag in the chunk options above tells
# whether to print the results or not. Usually you don't want to print the
# library statements, or any code on the pdf.
# Main Packages ========
# I use these in every doc
library(tidyverse)
library(knitr)
library(kableExtra)
library(modelsummary)
library(targets)

options(dplyr.summarise.inform = FALSE)
# Other packages ------
# These sometimes get used, and sometimes don't.
library(mlogit)
library(leaflet)
library(sf)
library(ggspatial)
library(ggnewscale)

options(tinytex.verbose = TRUE)
source("R/choice_modeling.R")
# Instructions and options =========
# prints missing data in tables as blank space
options(knitr.kable.NA = '') 
# tells kableExtra to not load latex table packages in the chunk output
options(kableExtra.latex.load_packages = FALSE) 

# round and format numbers that get printed in the text of the article.
inline_hook <- function(x) {
  if (is.numeric(x)) {
    format(x, digits = 3, big.mark = ",")
  } else x
}

knitr::knit_hooks$set(inline = inline_hook)
knitr::opts_chunk$set(echo = TRUE)

# options for latex-only output
if(knitr::is_latex_output()) {
  knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
} 

theme_set(theme_bw())
dj1 <- wesanderson::wes_palette("FantasticFox1")
dj2 <- wesanderson::wes_palette("Darjeeling1", type = "continuou")

options("modelsummary_format_numeric_latex" = "plain")
f <- function(x) format(round(x, 1), big.mark=",")
gm <-  list(
  list("raw" = "nobs",  "clean" = "Num.Obs.", "fmt" = f),
  list("raw" = "logLik","clean" = "Log Likelihood", "fmt" = 1),
  list("raw" = "rho20", "clean" = "McFadden Rho-Sq", "fmt" = 3)
)
```
